<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ruben Maxwell â€” Portfolio</title>
  <meta name="description" content="Ruben Maxwell â€” Computer Science student. Front-end developer, AI/ML practitioner, and quantum ML researcher." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  <style>
    /*
    =====================================================================
    âœ¦ PARALLAX GLASSFOLIO â€” single-file site
    - Smooth parallax hero using layered pixel-art mountains (assets supported)
    - Glassmorphism cards + neon accents
    - Tasteful effects: starfield, particle grid, scroll progress, magnetic btns,
      custom cursor, reveal on scroll, tilt, ripple, theme switcher,
      konami code easter egg, sound fx, and more.
    - Designed for mobile-first and fully responsive
    - Everything is here, no external dependencies (except for GSAP and fonts)
    =====================================================================
    */

    /*
    =====================================================================
    GLOBAL & UTILITIES
    =====================================================================
    */
    :root {
      --bg-dark: #120b22;
      --bg-light: #20133c;
      --bg-lighter: #2f1d53;
      --text-white: #f5f5ff;
      --text-light: #cec4e0;
      --accent: #7ee6ff;
      --primary: #9471d8;
      --ring-primary: rgba(148, 113, 216, 0.4);
      --glass-bg: rgba(255, 255, 255, 0.08);
      --glass-border: rgba(255, 255, 255, 0.2);
    }
    html { scroll-behavior: smooth; }
    body {
      background-color: var(--bg-dark);
      color: var(--text-white);
      font-family: 'Outfit', sans-serif;
      margin: 0;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow-x: hidden;
      cursor: none;
    }
    a { color: var(--accent); text-decoration: none; transition: color .2s ease; }
    a:hover { color: var(--primary); }
    h1, h2, h3, h4, h5, h6 { margin: 0; font-weight: 700; }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 16px;
    }
    .text-center { text-align: center; }
    .cursor {
      position: fixed;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background-color: var(--accent);
      pointer-events: none;
      transform: translate(-50%, -50%);
      transition: width .2s, height .2s, opacity .2s;
      z-index: 9999;
      opacity: 0.7;
      mix-blend-mode: exclusion;
    }
    .cursor-active {
      width: 48px;
      height: 48px;
      opacity: 1;
    }
    .headline { font-weight: 900; line-height: 1.1; margin-bottom: 20px; }
    .headline.is-large { font-size: clamp(3rem, 8vw, 6rem); }
    .headline.is-medium { font-size: clamp(2.5rem, 6vw, 4rem); }
    .title { font-size: clamp(1.8rem, 4vw, 3rem); font-weight: 900; line-height: 1.2; margin-bottom: 12px; }
    p { color: var(--text-light); line-height: 1.6; margin: 0 0 1em 0; }

    /*
    =====================================================================
    BUTTONS
    =====================================================================
    */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 14px 28px;
      background: var(--primary);
      color: #000;
      border: none;
      border-radius: 50px;
      font-weight: 600;
      font-size: 1rem;
      transition: transform .2s ease, box-shadow .2s ease;
      position: relative;
      overflow: hidden;
      z-index: 1;
      cursor: pointer;
    }
    .btn:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 20px rgba(148, 113, 216, 0.4);
    }
    .btn-glass {
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      color: var(--text-white);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
    }
    .btn-glass:hover {
      box-shadow: 0 8px 40px 0 rgba(148, 113, 216, 0.25);
    }
    .btn-group {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
      margin-top: 20px;
    }
    .btn-icon {
      width: 46px;
      height: 46px;
      padding: 0;
      border-radius: 50%;
    }
    .ripple {
      position: absolute;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transform: scale(0);
      animation: ripple .6s linear forwards;
    }
    @keyframes ripple {
      to { transform: scale(4); opacity: 0; }
    }

    /*
    =====================================================================
    HEADER & HERO
    =====================================================================
    */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1000;
      transition: background-color .3s ease;
    }
    .header.is-scrolled {
      background: var(--bg-dark);
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    .header-inner {
      display: flex;
      justify-content: space-between;
      align-items: center;
      height: 70px;
    }
    .logo {
      font-weight: 900;
      font-size: 1.5rem;
      letter-spacing: -1px;
    }
    .hero {
      position: relative;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    .hero-content {
      position: relative;
      z-index: 10;
      text-shadow: 0 4px 12px rgba(0,0,0,0.4);
    }
    .hero-title {
      font-size: clamp(4rem, 12vw, 8rem);
      line-height: 1.1;
      font-weight: 900;
      text-shadow: 0 0 20px rgba(126,230,255,0.6);
      -webkit-text-stroke: 1px var(--accent);
      color: transparent;
      margin-bottom: 1rem;
    }
    .hero-subtitle {
      font-size: clamp(1rem, 4vw, 1.5rem);
      color: var(--text-light);
      margin-bottom: 2rem;
    }
    .hero-parallax {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
    .hero-parallax img, .hero-parallax .moon {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transform-origin: bottom center;
      will-change: transform;
    }
    .hero-parallax .moon {
      width: 120px;
      height: 120px;
      top: 10%;
      left: 70%;
      background: #fdfdfd;
      border-radius: 50%;
      box-shadow: 0 0 30px #fdfdfd;
    }
    .hero-container {
      position: relative;
      height: 200vh; /* This height allows for scrolling */
    }

    /*
    =====================================================================
    GLASS CARDS & CONTENT SECTIONS
    =====================================================================
    */
    .section {
      padding: 80px 0;
      position: relative;
      z-index: 20;
    }
    .card {
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
      margin-bottom: 24px;
      transition: transform .3s ease;
      will-change: transform;
    }
    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
    }
    .kpi {
      text-align: center;
    }
    .kpi-number {
      font-size: clamp(3rem, 8vw, 5rem);
      font-weight: 900;
      background: linear-gradient(135deg, var(--accent), var(--primary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .kpi-label {
      font-size: 1.1rem;
      color: var(--text-light);
    }
    .projects-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 32px;
      margin-top: 40px;
    }
    .project {
      display: flex;
      flex-direction: column;
      background: var(--bg-lighter);
      border-radius: 12px;
      overflow: hidden;
      position: relative;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      transition: transform .3s ease, box-shadow .3s ease;
    }
    .project:hover {
      transform: translateY(-8px);
      box-shadow: 0 16px 40px rgba(0,0,0,0.3);
    }
    .project-image {
      width: 100%;
      height: 200px;
      background-color: var(--bg-dark);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .project-content {
      padding: 24px;
    }
    .project-title {
      font-size: 1.5rem;
      margin-bottom: 8px;
    }
    .project-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 12px;
    }
    .tag {
      padding: 4px 12px;
      background: var(--bg-dark);
      border-radius: 20px;
      font-size: 0.8rem;
      color: var(--accent);
      font-weight: 500;
    }
    .contact-form {
      display: grid;
      gap: 16px;
      max-width: 600px;
      margin: 0 auto;
    }
    .contact-form input, .contact-form textarea {
      width: 100%;
      padding: 14px;
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      border-radius: 8px;
      color: var(--text-white);
      font-size: 1rem;
    }
    .contact-form input:focus, .contact-form textarea:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 2px rgba(126,230,255,0.4);
    }
    .contact-form textarea {
      resize: vertical;
      min-height: 120px;
    }
    .form-status {
      margin-top: 10px;
      font-style: italic;
      color: var(--accent);
    }
    .marquee-container {
      overflow: hidden;
      width: 100%;
      white-space: nowrap;
      padding: 20px 0;
      background: var(--bg-light);
      border-top: 1px solid var(--glass-border);
      border-bottom: 1px solid var(--glass-border);
      margin-top: 80px;
    }
    .marquee {
      display: inline-block;
      animation: marquee 25s linear infinite;
      padding-left: 100%;
    }
    .marquee span {
      font-size: 2.5rem;
      font-weight: 900;
      color: var(--primary);
      text-transform: uppercase;
      margin-right: 40px;
    }
    @keyframes marquee {
      from { transform: translateX(0); }
      to { transform: translateX(-100%); }
    }

    /*
    =====================================================================
    CANVAS BACKGROUNDS
    =====================================================================
    */
    .canvas-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }
    #starfield {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
    }
    #gridnet {
      width: 100%;
      height: 420px;
    }

    /*
    =====================================================================
    MISC. EFFECTS
    =====================================================================
    */
    .show-focus :focus:not(.no-focus) {
      outline: 2px solid var(--accent);
      outline-offset: 4px;
    }
    @media (prefers-reduced-motion: reduce) {
      .card, .project, .hero-parallax img, .hero-parallax .moon {
        transition: none !important;
        animation: none !important;
        transform: none !important;
      }
      .headline.is-large {
        -webkit-text-stroke: 0;
        color: var(--accent);
      }
      .marquee {
        animation: none;
      }
    }
  </style>
</head>
<body>
  <div class="cursor no-focus"></div>

  <header class="header">
    <div class="container header-inner">
      <a href="#" class="logo" data-magnetic>Ruben Maxwell</a>
      <nav class="nav">
        <a href="#about" class="btn btn-glass" data-magnetic>About</a>
      </nav>
    </div>
  </header>

  <main id="main">
    <div class="hero-container">
      <section class="hero">
        <div class="canvas-container">
          <canvas id="starfield"></canvas>
        </div>
        <div class="hero-parallax">
          <!-- Parallax layers (from back to front) -->
          <!-- Your specific images are now being used -->
          <img src="sky.png" alt="Sky Layer" class="parallax-layer" data-speed="0.05" />
          <img src="far-clouds.png" alt="Clouds Layer" class="parallax-layer" data-speed="0.1" />
          <img src="far-mountains.png" alt="Far Mountains" class="parallax-layer" data-speed="0.2" />
          <img src="mountains.png" alt="Near Mountains" class="parallax-layer" data-speed="0.4" />
          <img src="trees.png" alt="Trees and Ground" class="parallax-layer" data-speed="0.6" />
        </div>
        <div class="hero-content">
          <h1 class="hero-title">Hi â€” I'm Ruben Maxwell</h1>
          <p class="hero-subtitle">Computer Science student at University of Toronto. I build front-end apps, AI/ML models, and quantum ML experiments.</p>
          <div class="btn-group">
            <a href="#contact" class="btn" data-magnetic>Contact</a>
            <a class="btn btn-glass" href="resume.html" data-magnetic>Resume</a>
            <button class="btn btn-glass" data-action="warp" data-magnetic>Warp</button>
            <button class="btn btn-glass" id="soundToggle" data-magnetic>SFX</button>
          </div>
        </div>
      </section>
    </div>
    <section id="about" class="section">
      <div class="container">
        <div class="text-center">
          <h2 class="headline is-medium">Computer Science Student & Software Developer</h2>
          <p class="lead" style="max-width: 600px; margin: 0 auto 40px;">I'm Ruben Maxwell â€” I build polished front-end experiences and prototype AI/ML systems. My work spans responsive sites, object-detection models, and quantum ML research, and I enjoy mentoring students in robotics and programming.</p>
        </div>
        <div class="card-grid">
          <div class="card kpi">
            <div class="kpi-number">7+</div>
            <div class="kpi-label">Projects</div>
          </div>
          <div class="card kpi">
            <div class="kpi-number">97%</div>
            <div class="kpi-label">Model accuracy</div>
          </div>
          <div class="card kpi">
            <div class="kpi-number">2025</div>
            <div class="kpi-label">Available for internships</div>
          </div>
        </div>
        <div class="mt-12 text-center">
          <button class="btn btn-glass" data-action="grid-scan" data-magnetic>Scan Grid</button>
          <button class="btn btn-glass" data-action="grid-noise" data-magnetic>Add Noise</button>
          <button class="btn btn-glass" data-action="grid-clear" data-magnetic>Clear Grid</button>
          <canvas id="gridnet" class="mt-8"></canvas>
        </div>
      </div>
    </section>

    <section id="work" class="section">
      <div class="container">
        <div class="text-center">
          <h2 class="headline is-medium">Selected Projects</h2>
          <p style="max-width: 600px; margin: 0 auto 40px;">Explore a collection of my recent projects, showcasing a blend of creative design and technical execution.</p>
        </div>
        <div class="projects-grid">
          <div class="project" data-tilt>
            <div class="project-image">
              <canvas class="thumb-canvas" data-mode="rings"></canvas>
            </div>
            <div class="project-content">
              <h3 class="project-title">AI Object Detection</h3>
              <p>Team project using CNNs for real-time object detection with visualization and live data collection â€” achieved 97% accuracy.</p>
              <div class="project-tags">
                <span class="tag">Python</span>
                <span class="tag">CNN</span>
                <span class="tag">TensorFlow</span>
              </div>
            </div>
          </div>

          <div class="project" data-tilt>
            <div class="project-image">
              <canvas class="thumb-canvas" data-mode="grid"></canvas>
            </div>
            <div class="project-content">
              <h3 class="project-title">Personal Chat Messenger</h3>
              <p>A secure chat application built with React and Firebase providing private messaging and authentication flows.</p>
              <div class="project-tags">
                <span class="tag">React</span>
                <span class="tag">Firebase</span>
                <span class="tag">Realtime</span>
              </div>
            </div>
          </div>

          <div class="project" data-tilt>
            <div class="project-image">
              <canvas class="thumb-canvas" data-mode="wave"></canvas>
            </div>
            <div class="project-content">
              <h3 class="project-title">Churn Modeling</h3>
              <p>Data science pipeline using Pandas, scikit-learn and a Keras ANN to predict customer churn with ~90% accuracy.</p>
              <div class="project-tags">
                <span class="tag">Python</span>
                <span class="tag">Keras</span>
                <span class="tag">scikit-learn</span>
              </div>
            </div>
          </div>

          <div class="project" data-tilt>
            <div class="project-image">
              <canvas class="thumb-canvas" data-mode="orbs"></canvas>
            </div>
            <div class="project-content">
              <h3 class="project-title">Quantum ML Research</h3>
              <p>Explored VQEs, QNNs and quantum kernels using Qiskit, PennyLane, and Cirq; built and simulated prototype circuits.</p>
              <div class="project-tags">
                <span class="tag">Qiskit</span>
                <span class="tag">PennyLane</span>
                <span class="tag">Cirq</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="contact" class="section">
      <div class="container">
        <div class="text-center">
          <h2 class="headline is-medium">Get In Touch</h2>
          <p style="max-width: 600px; margin: 0 auto 40px;">Have a project in mind or just want to say hello? I'd love to hear from you. Fill out the form below and I'll get back to you soon.</p>
        </div>
        <form class="contact-form" onsubmit="event.preventDefault(); fakeSubmit(this);">
          <input type="text" name="name" placeholder="Your Name" required />
          <input type="email" name="email" placeholder="Your Email" required />
          <textarea name="message" placeholder="Your Message" required></textarea>
          <div class="btn-group">
            <button type="submit" class="btn" data-magnetic>Send Message</button>
            <div class="form-status" id="formStatus"></div>
          </div>
        </form>
        <div class="text-center mt-6">
          <p class="text-sm">Or email me directly: <a href="mailto:rubenbmaxwell@gmail.com">rubenbmaxwell@gmail.com</a> â€¢ +1 416 432 5079</p>
          <p class="text-sm mt-2">LinkedIn: <a href="https://linkedin.com/in/ruben-maxwell">linkedin.com/in/ruben-maxwell</a></p>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="marquee-container">
      <div class="marquee">
        <span>Connect</span>
        <span>Collaborate</span>
        <span>Create</span>
        <span>Design</span>
        <span>Innovate</span>
        <span>Code</span>
      </div>
      <div class="marquee">
        <span>Connect</span>
        <span>Collaborate</span>
        <span>Create</span>
        <span>Design</span>
        <span>Innovate</span>
        <span>Code</span>
      </div>
    </div>
  </footer>

  <script>
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    // =====================================================================
    // CUSTOM CURSOR
    // =====================================================================
    const cursor = document.querySelector('.cursor');
    const links = document.querySelectorAll('a, button, [data-magnetic]');
    document.addEventListener('mousemove', e => {
      cursor.style.transform = `translate(${e.clientX}px, ${e.clientY}px)`;
    });
    links.forEach(link => {
      link.addEventListener('mouseenter', () => cursor.classList.add('cursor-active'));
      link.addEventListener('mouseleave', () => cursor.classList.remove('cursor-active'));
    });

    // =====================================================================
    // MAGNETIC BUTTONS
    // =====================================================================
    document.querySelectorAll('[data-magnetic]').forEach(btn => {
      btn.addEventListener('mousemove', (e) => {
        const r = btn.getBoundingClientRect();
        const mx = e.clientX - r.left - r.width / 2;
        const my = e.clientY - r.top - r.height / 2;
        btn.style.transform = `translate(${mx * 0.2}px, ${my * 0.2}px)`;
      });
      btn.addEventListener('mouseleave', () => {
        btn.style.transform = `translate(0, 0)`;
      });
    });

    // =====================================================================
    // HERO PARALLAX (REWRITTEN FOR SCROLL)
    // =====================================================================
    if (window.gsap && !prefersReduced) {
      gsap.registerPlugin(ScrollTrigger);

      // Get all parallax layers and apply an animation to each
      const parallaxLayers = gsap.utils.toArray('.parallax-layer');
      parallaxLayers.forEach(layer => {
        const speed = parseFloat(layer.dataset.speed);
        gsap.to(layer, {
          y: () => `-${(window.innerHeight * 2) * speed}px`, // Adjust based on scroll distance
          ease: "none",
          scrollTrigger: {
            trigger: ".hero-container",
            start: "top top",
            end: "bottom top",
            scrub: true,
          }
        });
      });
    }

    // Tilt effect for cards
    document.querySelectorAll('[data-tilt]').forEach(card => {
      let px=0, py=0; const damp = 9;
      card.addEventListener('mousemove', (e) => {
        const r = card.getBoundingClientRect();
        const x = (e.clientX - r.left) / r.width; // 0..1
        const y = (e.clientY - r.top) / r.height;
        px = (x - .5) * 14; py = (y - .5) * -14;
        card.style.transform = `perspective(800px) rotateX(${py}deg) rotateY(${px}deg)`;
      });
      card.addEventListener('mouseleave', () => {
        card.style.transform = 'perspective(800px) rotateX(0) rotateY(0)';
      });
    });

    // Reveal on scroll using IntersectionObserver (no GSAP needed here)
    const revealables = document.querySelectorAll('.card, .kpi, .headline, .title, .marquee');
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(en => {
        if (en.isIntersecting) {
          en.target.animate([
            { opacity: 0, transform: 'translateY(20px)' },
            { opacity: 1, transform: 'translateY(0)' }
          ], { duration: 550, easing: 'cubic-bezier(.2,.8,.2,1)', fill: 'forwards' });
          io.unobserve(en.target);
        }
      })
    }, { threshold: .16 });
    revealables.forEach(el => io.observe(el));

    // =====================================================================
    // CANVAS: STARFIELD (reacts to scroll + controls)
    // =====================================================================
    const starCanvas = document.getElementById('starfield');
    const sCtx = starCanvas.getContext('2d');
    let stars = [], starActive = true, warp = 0;
    function resizeStar(){ starCanvas.width = starCanvas.clientWidth; starCanvas.height = starCanvas.clientHeight; }
    addEventListener('resize', resizeStar); resizeStar();

    function makeStars(){
      const count = Math.floor((starCanvas.width * starCanvas.height) / 9000);
      stars = new Array(count).fill(0).map(()=>({
        x: Math.random()*starCanvas.width,
        y: Math.random()*starCanvas.height,
        z: Math.random()*1 + .3,
        r: Math.random()*1.3 + .2
      }));
    }
    makeStars();

    function drawStars(){
      sCtx.clearRect(0,0,starCanvas.width, starCanvas.height);
      for (const s of stars){
        const twinkle = (Math.sin((performance.now()/300 + s.x)*0.3)+1)/2 * .4 + .6;
        sCtx.beginPath();
        sCtx.arc(s.x, s.y, s.r * (twinkle + warp*0.8), 0, Math.PI*2);
        sCtx.fillStyle = `rgba(255,255,255,${(0.7 * s.z + 0.3)})`;
        sCtx.fill();
      }
    }

    function animateStars(){
      if (starActive){
        stars.forEach(s=>{ s.y += (0.07 + warp*0.8) * s.z + (scrollY/50000); if (s.y > starCanvas.height) s.y = 0; });
        drawStars();
      }
      requestAnimationFrame(animateStars);
    } animateStars();

    // =====================================================================
    // CANVAS: GRID NETWORK (interactive particles)
    // =====================================================================
    const gridCanvas = document.getElementById('gridnet');
    const gCtx = gridCanvas.getContext('2d');
    function resizeGrid(){ gridCanvas.width = gridCanvas.clientWidth; gridCanvas.height = 420; } // fixed height for aesthetics
    addEventListener('resize', resizeGrid); resizeGrid();

    const nodes = [];
    function initGrid(){
      nodes.length = 0;
      const cols = Math.floor(gridCanvas.width / 28);
      const rows = Math.floor(gridCanvas.height / 28);
      for (let y=0;y<rows;y++) for (let x=0;x<cols;x++) {
        nodes.push({ x: (x+.5)*gridCanvas.width/cols, y: (y+.5)*gridCanvas.height/rows, o: Math.random()*0.6+0.2 });
      }
    }
    initGrid();

    let mouse = { x: -9999, y: -9999 };
    gridCanvas.addEventListener('mousemove', (e)=>{
      const r = gridCanvas.getBoundingClientRect();
      mouse.x = e.clientX - r.left; mouse.y = e.clientY - r.top;
    });
    gridCanvas.addEventListener('mouseleave', ()=>{ mouse.x = mouse.y = -9999; });

    function drawGrid(){
      gCtx.clearRect(0,0,gridCanvas.width, gridCanvas.height);
      for (const p of nodes){
        const d = Math.hypot(mouse.x-p.x, mouse.y-p.y);
        const s = Math.max(0, 1 - d/160);
        const r = 2 + s*3;
        gCtx.beginPath(); gCtx.arc(p.x, p.y, r, 0, Math.PI*2);
        gCtx.fillStyle = `rgba(126,230,255,${(p.o*0.6 + s*0.8)})`;
        gCtx.fill();
      }
      // connections
      gCtx.lineWidth = 1;
      for (let i=0;i<nodes.length;i++){
        for (let j=i+1;j<i+12 && j<nodes.length;j++){
          const a = nodes[i], b = nodes[j];
          const d = Math.hypot(a.x-b.x, a.y-b.y);
          if (d < 120){
            const o = 1 - d/120;
            gCtx.strokeStyle = `rgba(126,230,255,${o*0.35})`;
            gCtx.beginPath(); gCtx.moveTo(a.x, a.y); gCtx.lineTo(b.x, b.y); gCtx.stroke();
          }
        }
      }
    }
    function loopGrid(){ drawGrid(); requestAnimationFrame(loopGrid); } loopGrid();

    document.querySelector('[data-action="grid-scan"]').onclick = () => {
      let t = 0; const id = setInterval(()=>{ t+=8; gridCanvas.style.setProperty('filter', `hue-rotate(${t}deg)`); if (t>360) { clearInterval(id); gridCanvas.style.filter=''; } }, 30);
    };
    document.querySelector('[data-action="grid-noise"]').onclick = () => {
      nodes.forEach(p=> p.o = Math.random()*0.9+0.1);
    };
    document.querySelector('[data-action="grid-clear"]').onclick = () => {
      nodes.forEach(p=> p.o = 0.2);
    };

    // =====================================================================
    // THUMBNAIL CANVASES (projects)
    // =====================================================================
    const thumbs = document.querySelectorAll('.thumb-canvas');
    thumbs.forEach(canvas => {
      const ctx = canvas.getContext('2d');
      canvas.width = canvas.clientWidth; canvas.height = canvas.clientHeight;
      const mode = canvas.dataset.mode;
      if (mode === 'rings') drawRings();
      if (mode === 'grid') drawTinyGrid();
      if (mode === 'wave') drawWaves();
      if (mode === 'orbs') drawOrbs();

      function drawRings(){
        for (let i=16;i>0;i--){
          ctx.beginPath(); ctx.arc(canvas.width/2, canvas.height/2, i*8, 0, Math.PI*2);
          ctx.strokeStyle = `rgba(126,230,255,${0.08 + i*0.02})`; ctx.lineWidth = 2; ctx.stroke();
        }
      }
      function drawTinyGrid(){
        ctx.fillStyle = 'rgba(255,255,255,.08)'; ctx.fillRect(0,0,canvas.width,canvas.height);
        for (let y=0;y<canvas.height;y+=12){ for (let x=0;x<canvas.width;x+=12){
          ctx.fillStyle = `rgba(126,230,255,${Math.random()*0.6})`; ctx.fillRect(x+2,y+2,2,2);
        }}
      }
      function drawWaves(){
        ctx.fillStyle = 'rgba(255,255,255,.06)'; ctx.fillRect(0,0,canvas.width,canvas.height);
        for (let y=0;y<8;y++){
          ctx.beginPath(); ctx.moveTo(0, canvas.height/2);
          for (let x=0;x<canvas.width;x++) ctx.lineTo(x, canvas.height/2 + Math.sin((x+y*10)/16)*10);
          ctx.strokeStyle = `rgba(255,111,216,${0.08 + y*0.06})`; ctx.stroke();
        }
      }
      function drawOrbs(){
        for (let i=0;i<18;i++){
          const x = Math.random()*canvas.width, y = Math.random()*canvas.height, r = 10+Math.random()*18;
          const g = ctx.createRadialGradient(x,y,0,x,y,r);
          g.addColorStop(0,'rgba(126,230,255,.6)'); g.addColorStop(1,'rgba(126,230,255,0)');
          ctx.fillStyle = g; ctx.beginPath(); ctx.arc(x,y,r,0,Math.PI*2); ctx.fill();
        }
      }
    });

    // =====================================================================
    // SOUND FX (optional tiny blip)
    // =====================================================================
    let audioCtx, blip; const soundToggle = document.getElementById('soundToggle');
    soundToggle.addEventListener('click', () => {
      if (!audioCtx) {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        blip = audioCtx.createOscillator(); const gain = audioCtx.createGain();
        blip.type = 'sine'; blip.frequency.value = 880; gain.gain.value = 0.0001; blip.connect(gain); gain.connect(audioCtx.destination); blip.start();
        soundToggle.textContent = 'SFX: on';
      } else {
        audioCtx.close(); audioCtx = null; soundToggle.textContent = 'SFX';
      }
    });

    function ping(){ if (!audioCtx) return; const o = audioCtx.createOscillator(); const g = audioCtx.createGain();
      o.type='triangle'; o.frequency.value = 600 + Math.random()*400; g.gain.value=.0001; o.connect(g); g.connect(audioCtx.destination); o.start(); g.gain.exponentialRampToValueAtTime(.0000001, audioCtx.currentTime+.25); o.stop(audioCtx.currentTime+.26) }

    // Fake form submit (no backend)
    function fakeSubmit(form){
      document.getElementById('formStatus').textContent = 'Sendingâ€¦';
      setTimeout(()=>{ document.getElementById('formStatus').textContent = 'Thanks! I will reply soon.'; ping(); form.reset(); }, 800);
    }

    // =====================================================================
    // GSAP Scroll artistry (optional)
    // =====================================================================
    if (window.gsap && !prefersReduced){
      gsap.registerPlugin(ScrollTrigger);
      gsap.to('.moon', { y: 40, scale: 1.05, scrollTrigger: { scrub: 0.5, start: 'top top', end: '+=600' }});
      gsap.utils.toArray('.kpi').forEach((el, i)=>{
        gsap.from(el, { y: 30, opacity: 0, duration: .6, delay: i*0.08, scrollTrigger: { trigger: el, start: 'top 80%' } });
      });
      gsap.utils.toArray('.project').forEach((el, i)=>{
        gsap.from(el, { x: i%2? 20 : -20, opacity: 0, duration: .6, scrollTrigger: { trigger: el, start: 'top 85%' } });
      });
    }

    // =====================================================================
    // ACCESSIBILITY ENHANCEMENTS
    // =====================================================================
    // Focus ring visibility for keyboard users only
    function handleFocusStyles() {
      function addFocusOutline() {
        document.body.classList.add("show-focus");
      }
      function removeFocusOutline() {
        document.body.classList.remove("show-focus");
      }
      window.addEventListener("keydown", e => {
        if (e.key === "Tab" || e.keyCode === 9) addFocusOutline();
      });
      window.addEventListener("mousedown", removeFocusOutline);
    }
    handleFocusStyles();

    // Skip-to-content for better keyboard nav
    const skipLink = document.createElement("a");
    skipLink.href = "#main";
    skipLink.textContent = "Skip to content";
    skipLink.style.cssText = `
      position: absolute;
      top: -40px;
      left: 10px;
      padding: 8px 14px;
      background: var(--primary);
      color: #000;
      border-radius: 6px;
      font-weight: bold;
      z-index: 9999;
      transition: top 0.3s ease;
    `;
    skipLink.addEventListener("focus", () => skipLink.style.top = "10px");
    skipLink.addEventListener("blur", () => skipLink.style.top = "-40px");
    document.body.prepend(skipLink);

    // =====================================================================
    // SCROLL TO TOP BUTTON
    // =====================================================================
    const scrollBtn = document.createElement("button");
    scrollBtn.innerHTML = "â¬†";
    scrollBtn.setAttribute("aria-label", "Scroll back to top");
    scrollBtn.style.cssText = `
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--primary);
      color: #000;
      border: none;
      border-radius: 50%;
      width: 46px;
      height: 46px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
      cursor: pointer;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
      z-index: 999;
    `;
    document.body.appendChild(scrollBtn);

    window.addEventListener("scroll", () => {
      if (window.scrollY > 400) {
        scrollBtn.style.opacity = "1";
        scrollBtn.style.pointerEvents = "auto";
      } else {
        scrollBtn.style.opacity = "0";
        scrollBtn.style.pointerEvents = "none";
      }
    });

    scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    // =====================================================================
    // RANDOM COLOR MODE (FUN)
    // =====================================================================
    const randomColorBtn = document.createElement("button");
    randomColorBtn.textContent = "ðŸŒˆ";
    randomColorBtn.setAttribute("aria-label", "Randomize accent colors");
    randomColorBtn.style.cssText = `
      position: fixed;
      bottom: 20px;
      left: 20px;
      width: 46px;
      height: 46px;
      border-radius: 50%;
      background: var(--accent);
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 20px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.3);
      z-index: 999;
    `;
    document.body.appendChild(randomColorBtn);

    randomColorBtn.addEventListener("click", () => {
      const randomAccent = `hsl(${Math.floor(Math.random() * 360)}, 80%, 65%)`;
      document.documentElement.style.setProperty("--accent", randomAccent);
      ripple(randomColorBtn);
    });

    // =====================================================================
    // SMOOTH SCROLLING FOR INTERNAL LINKS
    // =====================================================================
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        const id = this.getAttribute("href").substring(1);
        const target = document.getElementById(id);
        if (target) {
          e.preventDefault();
          window.scrollTo({
            top: target.offsetTop - 20,
            behavior: "smooth",
          });
        }
      }); 
    });

    // =====================================================================
    // EASTER EGG MODE ðŸ‡âœ¨
    // =====================================================================
    let secretCode = "";
    const konami = "ArrowUpArrowUpArrowDownArrowDownArrowLeftArrowRightArrowLeftArrowRightba";
    document.addEventListener("keydown", (e) => {
      secretCode += e.key;
      if (secretCode.includes(konami)) {
        document.body.style.transition = "all 1s ease";
        document.body.style.filter = "hue-rotate(270deg)";
        setTimeout(() => {
          document.body.style.filter = "";
        }, 2500);
        ping();
        secretCode = "";
      }
    });

    console.log("%câœ¨ Ruben Maxwell â€” portfolio loaded âœ¨", "background:#7ee6ff;color:#000;font-size:16px;padding:4px 8px;border-radius:6px");

  </script>
</body>
</html>
